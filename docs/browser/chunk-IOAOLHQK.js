import{a as ot,b as rt,c as nt}from"./chunk-CQWU2F2G.js";import{a as at}from"./chunk-JMB7VPA3.js";import{$a as e,$d as V,Bb as w,Be as z,Ce as Q,Dc as E,Fc as b,Ga as l,Ha as s,Hc as I,Ic as y,Ma as x,Mc as k,Pa as p,Pc as P,Qa as Y,Qc as R,Ra as f,Ta as Z,Vc as it,Xa as h,Xc as T,Yc as D,Zc as N,Zd as A,_d as U,ab as t,ae as B,ba as S,bb as c,de as L,f as st,fb as $,ga as W,ha as X,ib as g,kb as v,kc as _,mc as F,nc as M,se as dt,te as j,ue as q,vb as r,vc as C,ve as G,wb as tt,xb as et,ye as O,ze as H}from"./chunk-HK3YRTRN.js";function St(i,n){i&1&&(e(0,"mat-error"),r(1," l'username \xE8 richiesto "),t())}function xt(i,n){i&1&&(e(0,"mat-error"),r(1," La password \xE8 richiesta "),t())}function wt(i,n){if(i&1&&(e(0,"div",26),r(1),t()),i&2){let d=v();l(),tt(d.error)}}var mt=(()=>{let n=class n extends A{constructor(o,m,a,u){super(),this.formBuilder=o,this.route=m,this.router=a,this.authService=u,this.submitted=!1,this.loading=!1,this.error="",this.hide=!0}ngOnInit(){this.authForm=this.formBuilder.group({username:["",b.required],password:["",b.required]})}get f(){return this.authForm.controls}onSubmit(){this.submitted=!0,this.loading=!0,this.error="",this.subs.sink=this.authService.login(this.f.username.value,this.f.password.value).subscribe({next:o=>{if(o){if(this.authService.currentUserValue.token)switch(o.role){case"ROLE_ADMIN":this.router.navigate(["/admin/"]);break;case"ROLE_USER":this.router.navigate(["/impiegato/"]);break}}else this.error="Username o Password Errati!"},error:o=>{this.error=o,this.submitted=!1,this.loading=!1}}),this.submitted=!1,this.loading=!1}};n.\u0275fac=function(m){return new(m||n)(s(T),s(_),s(F),s(C))},n.\u0275cmp=S({type:n,selectors:[["app-signin"]],standalone:!0,features:[x,w],decls:41,vars:11,consts:[[1,"auth-container"],[1,"row","auth-main"],[1,"col-sm-6","px-0","d-none","d-sm-block","auth-form-section",2,"background-color","white"],[1,"form-section"],[1,"auth-wrapper","justify-content-center"],["src","assets/images/pages/aspMD.png",1,"img-fluid",2,"height","475px","width","426px"],[1,"col-sm-6","auth-form-section"],[1,"auth-wrapper"],[1,"welcome-msg"],[1,"login-title"],[1,"validate-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","username"],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],[1,"col-xl-12col-lg-12","col-md-12","col-sm-12","mb-2"],["matInput","","formControlName","password",3,"type"],["href","#","onClick","return false;","matSuffix","",3,"click"],["matSuffix","",1,"material-icons-two-tone","color-icon","m-3"],[1,"d-flex","justify-content-between","align-items-center","align-right","mb-5"],["routerLink","/authentication/forgot-password",1,"txt1"],["class","alert alert-danger mt-3 mb-0"],[1,"container-auth-form-btn"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",1,"auth-form-btn",3,"disabled"],[1,"alert","alert-danger","mt-3","mb-0"]],template:function(m,a){if(m&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),c(5,"img",5),t()()(),e(6,"div",6)(7,"div",3)(8,"div",7)(9,"h2",8),r(10," Benvenuto Su Timesheet "),t(),e(11,"h2",9),r(12,"Accedi"),t(),e(13,"form",10),g("ngSubmit",function(){return a.onSubmit()}),e(14,"div",11)(15,"div",12)(16,"mat-form-field",13)(17,"mat-label"),r(18,"Username"),t(),c(19,"input",14),e(20,"mat-icon",15),r(21,"face"),t(),p(22,St,2,0,"mat-error"),t()()(),e(23,"div",11)(24,"div",16)(25,"mat-form-field",13)(26,"mat-label"),r(27,"Password"),t(),c(28,"input",17),e(29,"a",18),g("click",function(){return a.hide=!a.hide}),e(30,"mat-icon",19),r(31),t()(),p(32,xt,2,0,"mat-error"),t()()(),e(33,"div",20)(34,"a",21),r(35,"Password dimenticata?"),t()(),p(36,wt,2,1,"div",22),e(37,"div",23)(38,"div",24)(39,"button",25),r(40,"Login"),t()()()()()()()()()),m&2){let u,K;l(13),f("formGroup",a.authForm),l(9),h(22,(u=a.authForm.get("username"))!=null&&u.hasError("required")?22:-1),l(6),f("type",a.hide?"password":"text"),l(),Y("aria-label","Hide password")("aria-pressed",a.hide),l(2),et(" ",a.hide?"visibility_off":"visibility",""),l(),h(32,(K=a.authForm.get("password"))!=null&&K.hasError("required")?32:-1),l(4),h(36,a.error?36:-1),l(3),Z("auth-spinner",a.loading),f("disabled",!a.authForm.valid||a.loading)}},dependencies:[M,D,k,E,I,y,N,P,R,H,O,j,q,G,Q,z,V,U,L,B]});let i=n;return i})();var J=st(dt());function _t(i,n){i&1&&(e(0,"mat-error"),r(1," Inserisci un codice fiscale valido "),t())}function Ft(i,n){if(i&1){let d=$();e(0,"form",10),g("ngSubmit",function(){W(d);let m=v();return X(m.onSubmit())}),e(1,"div",11)(2,"div",12)(3,"span",13),r(4," Inserisci il codice fiscale associato alla tua utenza "),t(),e(5,"mat-form-field",14)(6,"mat-label"),r(7,"Codice Fiscale"),t(),c(8,"input",15),e(9,"mat-icon",16),r(10,"mail"),t(),p(11,_t,2,0,"mat-error"),t()()(),e(12,"div",17)(13,"button",18),r(14," Resetta password "),t()(),e(15,"div",19)(16,"div")(17,"a",20),r(18," Vuoi Accedere? "),t()()()()}if(i&2){let d=v(),o;f("formGroup",d.authForm),l(11),h(11,(o=d.authForm.get("email"))!=null&&o.hasError("required")||(o=d.authForm.get("email"))!=null&&o.touched?11:-1),l(2),f("disabled",!d.authForm.valid)}}function Mt(i,n){i&1&&(e(0,"div",11)(1,"div",21),c(2,"mat-spinner"),t()())}var lt=(()=>{let n=class n extends A{constructor(o,m,a,u){super(),this.formBuilder=o,this.route=m,this.router=a,this.authService=u,this.submitted=!1,this.loading=!1}ngOnInit(){this.authForm=this.formBuilder.group({email:["",[b.required]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}get f(){return this.authForm.controls}onSubmit(){this.submitted=!0,!this.authForm.invalid&&(this.loading=!0,this.subs.sink=this.authService.resetPassword(this.f.email.value).subscribe({next:o=>{o?J.default.fire("Password Resettata","riceverai la nuova password per email","success"):J.default.fire({icon:"error",title:"Email non trovata",text:"Assicurati di aver inserito l'email giusta!",footer:""}),this.loading=!1},error:o=>{J.default.fire({icon:"error",title:"Oops...",text:"Qualcosa \xE8 andato Storto!",footer:""}),this.loading=!1,this.router.navigate(["/authentication/signin"])}}))}};n.\u0275fac=function(m){return new(m||n)(s(T),s(_),s(F),s(C))},n.\u0275cmp=S({type:n,selectors:[["app-forgot-password"]],standalone:!0,features:[x,w],decls:13,vars:1,consts:[[1,"auth-container"],[1,"row","auth-main"],[1,"col-sm-6","px-0","d-none","d-sm-block"],[1,"left-img",2,"background-image","url(assets/images/pages/bg-03.png)"],[1,"col-sm-6","auth-form-section"],[1,"form-section"],[1,"auth-wrapper"],[1,"welcome-msg"],[1,"auth-signup-text","text-muted"],["class","validate-form",3,"formGroup"],[1,"validate-form",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-2"],[1,"error-subheader2","p-t-20","p-b-15"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","email","required",""],["matSuffix","",1,"material-icons-two-tone","color-icon","p-3"],[1,"container-auth-form-btn","mt-5"],["mat-raised-button","","color","primary","type","submit",1,"auth-form-btn",3,"disabled"],[1,"w-full","p-t-25","text-center"],["routerLink","/authentication/signin",1,"txt1"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","align-center","mt-2"]],template:function(m,a){m&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),c(3,"div",3),t(),e(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2",7),r(8," Resetta Password "),t(),e(9,"p",8),r(10,"verificati i dati manderemo una mail con la nuova password"),t(),p(11,Ft,19,3,"form",9)(12,Mt,3,0),t()()()()()),m&2&&(l(11),h(11,a.loading?12:11))},dependencies:[D,k,E,I,y,it,N,P,R,H,O,j,q,G,Q,z,V,U,L,B,M,at]});let i=n;return i})();var Jt=[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:mt},{path:"forgot-password",component:lt},{path:"locked",component:ot},{path:"page404",component:rt},{path:"page500",component:nt}];export{Jt as AUTH_ROUTE};
